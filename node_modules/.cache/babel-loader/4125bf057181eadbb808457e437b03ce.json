{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/jellybean/nextAcademy/final_project/react/homefoods/src/pages/UserProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nimport SessionContext from '../contexts/SessionContext.js';\nexport default _s(() => {\n  _s();\n\n  const {\n    isLoggedIn\n  } = useContext(SessionContext);\n  const {\n    id\n  } = useParams();\n  const [user, setUser] = useState({});\n  useEffect(() => {\n    axios.get(\"https://homefoods1.herokuapp.com/api/v1/users/me\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      console.log(response);\n      setUser({ ...response.data,\n        profileImage: response.data.image_path\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [id]);\n\n  if (!isLoggedIn || id === \"me\" && !localStorage.getItem(\"token\")) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 16\n    }, this);\n  }\n\n  const handleFileChange = e => {\n    const fileInput = e.target;\n    const formData = new FormData();\n    formData.append(\"image\", e.target.files[0]);\n    axios.post(\"https://homefoods1.herokuapp.com/api/v1/images/\", formData, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(() => {\n      fileInput.value = null;\n      const userCopy = { ...user\n      };\n      setUser({});\n      setUser(userCopy);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: user.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.profileImage,\n          width: \"200\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this)\n    }, void 0, false) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}, \"iuAjUcutFBD/2Qy4Gen2CbzcY78=\", false, function () {\n  return [useParams];\n});","map":{"version":3,"sources":["/home/jellybean/nextAcademy/final_project/react/homefoods/src/pages/UserProfile.js"],"names":["React","useState","useEffect","useContext","useParams","Redirect","axios","SessionContext","isLoggedIn","id","user","setUser","get","headers","Authorization","localStorage","getItem","then","response","console","log","data","profileImage","image_path","catch","error","handleFileChange","e","fileInput","target","formData","FormData","append","files","post","value","userCopy","username"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,kBAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AAEA,kBAAe,MAAM;AAAA;;AACjB,QAAM;AAACC,IAAAA;AAAD,MAAeL,UAAU,CAACI,cAAD,CAA/B;AACA,QAAM;AAACE,IAAAA;AAAD,MAAOL,SAAS,EAAtB;AACA,QAAM,CAACM,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZI,IAAAA,KAAK,CAACM,GAAN,CAAU,kDAAV,EAA8D;AAC1DC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADtB;AADiD,KAA9D,EAKCC,IALD,CAKMC,QAAQ,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAP,MAAAA,OAAO,CAAC,EACJ,GAAGO,QAAQ,CAACG,IADR;AAEJC,QAAAA,YAAY,EAAEJ,QAAQ,CAACG,IAAT,CAAcE;AAFxB,OAAD,CAAP;AAIH,KAXD,EAYCC,KAZD,CAYOC,KAAK,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,KAdD;AAeH,GAhBQ,EAgBN,CAAChB,EAAD,CAhBM,CAAT;;AAkBA,MAAI,CAACD,UAAD,IAAgBC,EAAE,KAAK,IAAP,IAAe,CAACM,YAAY,CAACC,OAAb,CAAqB,OAArB,CAApC,EAAoE;AAChE,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,QAAMU,gBAAgB,GAAIC,CAAD,IAAO;AAC5B,UAAMC,SAAS,GAAGD,CAAC,CAACE,MAApB;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,CAAC,CAACE,MAAF,CAASI,KAAT,CAAe,CAAf,CAAzB;AACA3B,IAAAA,KAAK,CAAC4B,IAAN,CAAW,iDAAX,EAA8DJ,QAA9D,EAAwE;AAACjB,MAAAA,OAAO,EAAE;AAChFC,QAAAA,aAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADqD;AAAV,KAAxE,EAGCC,IAHD,CAGM,MAAM;AACVW,MAAAA,SAAS,CAACO,KAAV,GAAkB,IAAlB;AACA,YAAMC,QAAQ,GAAG,EAAC,GAAG1B;AAAJ,OAAjB;AACAC,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAA,MAAAA,OAAO,CAACyB,QAAD,CAAP;AACD,KARD;AASD,GAbH;;AAeA,sBACI;AAAA,cAEQ1B,IAAI,CAACD,EAAL,gBACA;AAAA,6BACI;AAAA,gCACI;AAAK,UAAA,GAAG,EAAEC,IAAI,CAACY,YAAf;AAA6B,UAAA,KAAK,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAA,oBAAIZ,IAAI,CAAC2B;AAAT;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,qBADA,GAOA;AATR;AAAA;AAAA;AAAA;AAAA,UADJ;AAeH,CAzDD;AAAA,UAEiBjC,SAFjB;AAAA","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nimport SessionContext from '../contexts/SessionContext.js'\n\nexport default () => {\n    const {isLoggedIn} = useContext(SessionContext)\n    const {id} = useParams()\n    const [user, setUser] = useState({})\n\n    useEffect(() => {\n        axios.get(\"https://homefoods1.herokuapp.com/api/v1/users/me\", {\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n        })\n        .then(response => {\n            console.log(response)\n            setUser({\n                ...response.data,\n                profileImage: response.data.image_path\n            })\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    }, [id])\n\n    if (!isLoggedIn || (id === \"me\" && !localStorage.getItem(\"token\"))) {\n        return <Redirect to=\"/\" />\n    }\n\n    const handleFileChange = (e) => {\n        const fileInput = e.target\n        const formData = new FormData()\n        formData.append(\"image\", e.target.files[0])\n        axios.post(\"https://homefoods1.herokuapp.com/api/v1/images/\", formData, {headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }})\n        .then(() => {\n          fileInput.value = null\n          const userCopy = {...user}\n          setUser({})\n          setUser(userCopy)\n        })\n      }\n\n    return (\n        <div>\n            {\n                user.id ?\n                <>\n                    <div>\n                        <img src={user.profileImage} width=\"200\" />\n                        <p>{user.username}</p>\n                    </div>\n                </> : \n                null\n            }\n        </div>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}